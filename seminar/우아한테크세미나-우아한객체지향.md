# [ìš°ì•„í•œí…Œí¬ì„¸ë¯¸ë‚˜] 190620 ìš°ì•„í•œê°ì²´ì§€í–¥ by ìš°ì•„í•œí˜•ì œë“¤ ê°œë°œì‹¤ì¥ ì¡°ì˜í˜¸ë‹˜

**ì˜ì¡´ì„±ì„ ì´ìš©í•´ ì„¤ê³„ ì§„í™”ì‹œí‚¤ê¸°**

ì¶œì²˜

- ê°•ì˜
    - [https://www.youtube.com/watch?v=dJ5C4qRqAgA&list=PLYHc3yEGpy935uWHBIP63_94tYQVQw2Ns](https://www.youtube.com/watch?v=dJ5C4qRqAgA&list=PLYHc3yEGpy935uWHBIP63_94tYQVQw2Ns)

- ì†ŒìŠ¤ì½”ë“œ
    - [https://github.com/eternity-oop](https://github.com/eternity-oop)

- ì´ë¯¸ì§€
    - [https://www.slideshare.net/baejjae93/ss-151545329](https://www.slideshare.net/baejjae93/ss-151545329)

# Part 1. ì˜ì¡´ì„±

## ì„¤ê³„

- ì½”ë“œë¥¼ ì–´ë–»ê²Œ ë°°ì¹˜í•  ê²ƒì¸ê°€ì— ëŒ€í•œ ì˜ì‚¬ê²°ì •
- ì½”ë“œë¥¼ ì–´ë–¤ í´ë˜ìŠ¤, íŒ¨í‚¤ì§€, í”„ë¡œì íŠ¸ì— ë„£ì„ ê²ƒì¸ì§€
- í•µì‹¬ì€ ë³€ê²½ì— ì´ˆì 
    - ê°™ì´ ë³€ê²½ë˜ëŠ” ì½”ë“œë“¤ì„ ê°™ì´
    - ê°™ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ì½”ë“œë“¤ì€ ë”°ë¡œ

## ì˜ì¡´ì„±(Dependency)

- ë³€ê²½ìœ¼ë¡œ ì˜í–¥ì„ ë°›ì„ ê°€ëŠ¥ì„±
- A depends on B
- Aê°€ Bì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ê°€ì§„ë‹¤
- Bê°€ ë³€ê²½ë˜ë©´ Aë„ í•¨ê»˜ ë³€ê²½ì— ì˜í•œ ì˜í–¥ì„ ë°›ëŠ”ë‹¤(ë¬´ì¡°ê±´ ë°”ë€Œì§„ ì•ŠìŒ)

## í´ë˜ìŠ¤ ì˜ì¡´ì„±

1. ì—°ê´€ê´€ê³„(Association)

    ```java
    class A {
        private B b;
    }
    ```

2. ì˜ì¡´ ê´€ê³„(Dependency)

    ```java
    class A {
        public B method(B b) {
            return new B();
        }
    }
    ```

3. ìƒì† ê´€ê³„(Inheritance)

    ```java
    class A extends B {
    }
    ```

4. ì‹¤ì²´í™” ê´€ê³„(Realization)

    ```java
    class A implements B {
    }
    ```

## íŒ¨í‚¤ì§€ ì˜ì¡´ì„±

- packageA depends on packageB
- íŒ¨í‚¤ì§€ Aê°€ íŒ¨í‚¤ì§€ Bì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ê°€ì§„ë‹¤
- íŒ¨í‚¤ì§€ Bì˜ í´ë˜ìŠ¤ê°€ ë³€ê²½ë˜ë©´ íŒ¨í‚¤ì§€ Aì˜ í´ë˜ìŠ¤ë„ í•¨ê»˜ ë³€ê²½ì— ì˜í•œ ì˜í–¥ì„ ë°›ëŠ”ë‹¤

> ë‹¤ë¥¸ íŒ¨í‚¤ì§€ë¥¼ `import`í•˜ë©´ ì˜ì¡´ì„±ì„ ê°€ì§„ë‹¤

## ì¢‹ì€ ì˜ì¡´ì„±ì„ ê°€ì§€ë„ë¡ ê´€ë¦¬í•˜ëŠ” ê·œì¹™

1. ì–‘ë°©í–¥ ì˜ì¡´ì„±ì„ í”¼í•˜ë¼(ì–‘ë°©í–¥(Bi-Directional) â†’ ë‹¨ë°©í–¥(Uni-Directional))

   **ì–‘ë°©í–¥(Bi-Directional)**

   Aì™€ Bê°€ ì›ë˜ëŠ” í•˜ë‚˜ì˜ í´ë˜ìŠ¤ë¼ê³  ë´ë„ ë¬´ë°©í•˜ë‹¤

   ì–µì§€ë¡œ ì°¢ì–´ë†“ì€ ê²ƒì´ë¼ê³  ë³´ë©´ ëœë‹¤

    ```java
    class A {
        private B b;
    
        public void setA(B b) {
            this.b = b;
            this.b.setA(this);
        }
    }
    
    class B {
        private A a;
    
        public void setA(A a) {
            this.a = a;
        }
    }
    ```

   **ë‹¨ë°©í–¥(Uni-Directional)**

    ```java
    class A {
        private B b;
    
        public void setA(B b) {
            this.b = b;
        }
    }
    
    class B {
    }
    ```

2. ë‹¤ì¤‘ì„±ì´ ì ì€ ë°©í–¥ì„ ì„ íƒí•˜ë¼(ì¼ëŒ€ë‹¤(One-To-Many) â†’ ë‹¤ëŒ€ì¼(Many-To-One))

   **ì¼ëŒ€ë‹¤(One-To-Many)**

    ```java
    class A {
        private Collection<B> bs;
    }
    
    class B {
    }
    ```

   **ë‹¤ëŒ€ì¼(Many-To-One)**

    ```java
    class A {
    }
    
    class B {
        private A a;
    }
    ```

3. ì˜ì¡´ì„±ì´ í•„ìš” ì—†ë‹¤ë©´ ì œê±°í•˜ë¼(ë‹¨ë°©í–¥(Uni-Directional) â†’ ì—†ìŒ(None))

   **ë‹¨ë°©í–¥(Uni-Directional)**

    ```java
    class A {
        private B b;
    }
    
    class B {
    }
    ```

   **ì—†ìŒ(None)**

    ```java
    class A {
    }
    
    class B {
    }
    ```

4. íŒ¨í‚¤ì§€ ì‚¬ì´ì˜ ì˜ì¡´ì„± ì‚¬ì´í´ì„ ì œê±°í•˜ë¼

   A â†’ B â†’ C â†’ A, ì´ëŸ¬í•œ ì˜ì¡´ì„± ì‚¬ì´í´ì€ ê²°êµ­ A, B, C ëª¨ë‘ í•˜ë‚˜ì˜ íŒ¨í‚¤ì§€ì¸ ê²ƒê³¼ ê°™ë‹¤.

# Part 2. ì˜ˆì œ ì‚´í´ë³´ê¸°

## í˜‘ë ¥

![woowahan-oo-037](https://image.slidesharecdn.com/woowahan-oo-190624161343/75/-37-2048.jpg?cb=1665722745)

ê°ì²´ì™€ ê°ì²´ ì‚¬ì´ì˜ ë©”ì‹œì§€ë¥¼ ì–´ë–¤ ì‹ìœ¼ë¡œ ì£¼ê³ ë°›ëŠ”ì§€ë¥¼ ì •í•¨

## **ì‹¤í–‰ê³¼ ì½”ë“œ**

**ì‹¤í–‰**

- ì‹œìŠ¤í…œìƒì—ì„œ ì‹¤í–‰
- ëŸ°íƒ€ì„ì— ì¸ìŠ¤í„´ìŠ¤ ê°„ì— í˜‘ë ¥ì´ ì´ë£¨ì–´ì§€ê³  ìˆëŠ” ë™ì ì¸ êµ¬ì¡°
- ì‹¤ì œ ì‹œê°„ì´ í¬í•¨ë˜ì–´ ë³€í™”ë¬´ìŒí•¨

**ì½”ë“œ**

- ê°œë°œìëŠ” ì´ëŸ¬í•œ ë³€í™”ë¬´ìŒí•œ ê°€ëŠ¥ì„±(í˜‘ë ¥ê´€ê³„)ì„ ì •ì ì¸ ì½”ë“œë¡œ ë‹´ì•„ì•¼ í•¨

## ê´€ê³„ì—ëŠ” ë°©í–¥ì„±ì´ í•„ìš”í•˜ë‹¤

**ê°ì²´**

ë°©í–¥ì„±ì´ ì¡íˆë©´ êµ¬í˜„í•´ ì£¼ì–´ì•¼ í•œë‹¤. ì†ŒìŠ¤ ë ˆë²¨ì—ì„œë¶€í„° íƒ€ê²Ÿì´ í•„ìš”í•¨.

ë°©í–¥ì„±ì€ ì¤‘ìš”í•˜ë©°, ëŸ°íƒ€ì„ì— ê°ì²´ë“¤ì´ ì–´ë–¤ ë°©í–¥ìœ¼ë¡œ í˜‘ë ¥(ë©”ì‹œì§€ ë“±)í•˜ê³  ìˆëŠ”ì§€ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê´€ê³„ì˜ ë°©í–¥ì„ ì¡ì•„ì¤˜ì•¼ í•¨.

**DB**

foreign keyë§Œ ì„¤ì • í•´ë†“ìœ¼ë©´ ë°©í–¥ì„±ì´ ì—†ìŒ.

## ê´€ê³„ì˜ ì¢…ë¥˜ ì„¤ì •í•˜ê¸°

**ì—°ê´€ê´€ê³„**

í˜‘ë ¥ì„ ìœ„í•´ í•„ìš”í•œ **ì˜êµ¬ì ì¸** íƒìƒ‰êµ¬ì¡°

íŠ¹ì • ë¹ˆë„ìˆ˜ ì´ìƒìœ¼ë¡œ í˜‘ë ¥í•œë‹¤ë©´ ì˜êµ¬ì ìœ¼ë¡œ ì—°ê´€ê´€ê³„ë¥¼ ìƒì„±

**ì˜ì¡´ê´€ê³„**

í˜‘ë ¥ì„ ìœ„í•´ **ì¼ì‹œì ìœ¼ë¡œ** í•„ìš”í•œ ì˜ì¡´ì„±

íŒŒë¼ë¯¸í„°, ë¦¬í„´íƒ€ì…, ì§€ì—°ë³€ìˆ˜

## ì—°ê´€ê´€ê³„ = íƒìƒ‰ ê°€ëŠ¥ì„±(navigability)

[[github] Order.java](https://github.com/eternity-oop/Woowahan-OO-01-object-reference/blob/2dcde175de700ed27b921b4de7a934176c6769b7/src/main/java/org/eternity/food/domain/order/Order.java)

`Order` â†’ `OrderLineItem`

`Order`ì—ì„œ `OrderLineItem` ìœ¼ë¡œ íƒìƒ‰ ê°€ëŠ¥

`Order`ê°€ ë­”ì§€ ì•Œë©´ `Order`ë¥¼ í†µí•´ ì›í•˜ëŠ” `OrderLineItem`ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤.

> ğŸ’¡ ê°œë…ê³¼ ê°œë…ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì€ ë‹¤ë¥´ë‹¤. êµ¬í˜„í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆì„ ìˆ˜ ìˆë‹¤.

**ì—°ê´€ê´€ê³„ ê°œë…ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•**

1. ì¼ë°˜ì ìœ¼ë¡œëŠ” ê°ì²´ ì°¸ì¡°ë¥¼ ì‚¬ìš©
2. ë‹¤ë¥¸ ë°©ë²•ë„ ìˆìŒ

## êµ¬í˜„ ì‹œì‘í•˜ê¸°

[[github] Order.java](https://github.com/eternity-oop/Woowahan-OO-01-object-reference/blob/2dcde175de700ed27b921b4de7a934176c6769b7/src/main/java/org/eternity/food/domain/order/Order.java)

ê°ì²´ì— ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê¸° ìœ„í•´ì„œëŠ” ë©”ì‹œì§€ë¥¼ ë°›ëŠ” ë©”ì†Œë“œê°€ í•„ìš”í•˜ë‹¤.

**ìƒì„± ìˆœì„œëŠ” ë©”ì‹œì§€ â†’ ë©”ì†Œë“œì´ë‹¤.**

ë©”ì†Œë“œëŠ” ë©”ì‹œì§€ë¥¼ ë°›ê¸° ìœ„í•´ì„œ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì—, ë©”ì‹œì§€ê°€ ë¨¼ì € ê²°ì •ì´ ë˜ì–´ì•¼ í•œë‹¤.

### ì—°ê´€ê´€ê³„ êµ¬í˜„

`Order` â†’ `OrderLineItem`, `Order` â†’ `Shop`

- í˜‘ë ¥ì„ ìœ„í•´ í•„ìš”í•œ **ì˜êµ¬ì ì¸** íƒìƒ‰ êµ¬ì¡°ë¼ íŒë‹¨.
- ê°ì²´ ì°¸ì¡°ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„

### ê°ì²´ í˜‘ë ¥ êµ¬í˜„

ì„¤ê³„ëœ í˜‘ë ¥ì— ë§ì¶”ì–´ ë©”ì†Œë“œ êµ¬í˜„

![woowahan-oo-060](https://image.slidesharecdn.com/woowahan-oo-190624161343/75/-60-2048.jpg?cb=1665722745)

## ë ˆì´ì–´ ì•„í‚¤í…ì²˜(Layered Architecture)

![woowahan-oo-061](https://image.slidesharecdn.com/woowahan-oo-190624161343/75/-62-2048.jpg?cb=1665722745)

- Service
    - [OrderService.java](https://github.com/eternity-oop/Woowahan-OO-01-object-reference/blob/2dcde175de700ed27b921b4de7a934176c6769b7/src/main/java/org/eternity/food/service/order/OrderService.java)

        ```java
        @Service
        public class OrderService {
            /*...*/
            @Transactional
            public void placeOrder(Cart cart) {
                Order order = orderMapper.mapFrom(cart);
                order.place();
                orderRepository.save(order);
            }
            /*...*/
        }
        ```

- Domain
    - [Order.java](https://github.com/eternity-oop/Woowahan-OO-01-object-reference/blob/2dcde175de700ed27b921b4de7a934176c6769b7/src/main/java/org/eternity/food/domain/order/Order.java)

        ```java
        @Entity
        @Table(name="ORDERS")
        @Getter
        public class Order {
            /*...*/
        }
        ```

    - [OrderRepository.java](https://github.com/eternity-oop/Woowahan-OO-01-object-reference/blob/2dcde175de700ed27b921b4de7a934176c6769b7/src/main/java/org/eternity/food/domain/order/OrderRepository.java)

        ```java
        @Repository
        public interface OrderRepository extends JpaRepository<Order, Long> {
        }
        ```

- Infrastructure
    - JPA

        ```java
        @Repository
        public class OrderRepositoryImpl implements OrderRepository {
        }
        ```

> `(Object)Cart`â†’`OrderMapper`â†’`(Object)Order`â†’`OrderService`â†’`(Messages)`â†’`(Method)`â†’`Infrastructure`â†’`(Transaction)`
