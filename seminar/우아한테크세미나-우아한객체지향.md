# [우아한테크세미나] 190620 우아한객체지향 by 우아한형제들 개발실장 조영호님

**의존성을 이용해 설계 진화시키기**

- [https://www.youtube.com/watch?v=dJ5C4qRqAgA&list=PLYHc3yEGpy935uWHBIP63_94tYQVQw2Ns](https://www.youtube.com/watch?v=dJ5C4qRqAgA&list=PLYHc3yEGpy935uWHBIP63_94tYQVQw2Ns)

- [https://github.com/eternity-oop](https://github.com/eternity-oop)

- [https://www.slideshare.net/baejjae93/ss-151545329](https://www.slideshare.net/baejjae93/ss-151545329)

# Part 1. 의존성

## 설계

- 코드를 어떻게 배치할 것인가에 대한 의사결정
- 코드를 어떤 클래스, 패키지, 프로젝트에 넣을 것인지
- 핵심은 변경에 초점
    - 같이 변경되는 코드들을 같이
    - 같이 변경되지 않는 코드들은 따로

## 의존성(Dependency)

- 변경으로 영향을 받을 가능성
- A depends on B
- A가 B에 대한 의존성을 가진다
- B가 변경되면 A도 함께 변경에 의한 영향을 받는다(무조건 바뀌진 않음)

## 클래스 의존성

1. 연관관계(Association)

    ```java
    class A {
        private B b;
    }
    ```

2. 의존 관계(Dependency)

    ```java
    class A {
        public B method(B b) {
            return new B();
        }
    }
    ```

3. 상속 관계(Inheritance)

    ```java
    class A extends B {
    }
    ```

4. 실체화 관계(Realization)

    ```java
    class A implements B {
    }
    ```

## 패키지 의존성

- packageA depends on packageB
- 패키지 A가 패키지 B에 대한 의존성을 가진다
- 패키지 B의 클래스가 변경되면 패키지 A의 클래스도 함께 변경에 의한 영향을 받는다

> 다른 패키지를 `import`하면 의존성을 가진다

## 좋은 의존성을 가지도록 관리하는 규칙

1. 양방향 의존성을 피하라(양방향(Bi-Directional) → 단방향(Uni-Directional))

   **양방향(Bi-Directional)**

   A와 B가 원래는 하나의 클래스라고 봐도 무방하다

   억지로 찢어놓은 것이라고 보면 된다

    ```java
    class A {
        private B b;
    
        public void setA(B b) {
            this.b = b;
            this.b.setA(this);
        }
    }
    
    class B {
        private A a;
    
        public void setA(A a) {
            this.a = a;
        }
    }
    ```

   **단방향(Uni-Directional)**

    ```java
    class A {
        private B b;
    
        public void setA(B b) {
            this.b = b;
        }
    }
    
    class B {
    }
    ```

2. 다중성이 적은 방향을 선택하라(일대다(One-To-Many) → 다대일(Many-To-One))

   **일대다(One-To-Many)**

    ```java
    class A {
        private Collection<B> bs;
    }
    
    class B {
    }
    ```

   **다대일(Many-To-One)**

    ```java
    class A {
    }
    
    class B {
        private A a;
    }
    ```

3. 의존성이 필요 없다면 제거하라(단방향(Uni-Directional) → 없음(None))

   **단방향(Uni-Directional)**

    ```java
    class A {
        private B b;
    }
    
    class B {
    }
    ```

   **없음(None)**

    ```java
    class A {
    }
    
    class B {
    }
    ```

4. 패키지 사이의 의존성 사이클을 제거하라

   A → B → C → A, 이러한 의존성 사이클은 결국 A, B, C 모두 하나의 패키지인 것과 같다.
